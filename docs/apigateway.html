---

title: apigateway schema for lambda proxy integration


keywords: fastai
sidebar: home_sidebar



nb_path: "apigateway.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: apigateway.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Response" class="doc_header"><code>class</code> <code>Response</code><a href="https://github.com/thanakijwanavit/awsSchema/tree/master/awsSchema/apigateway.py#L15" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Response</code>(<strong><code>body</code></strong>:<code>Optional</code>[<code>str</code>], <strong><code>statusCode</code></strong>:<code>int</code>=<em><code>200</code></em>, <strong><code>headers</code></strong>:<code>dict</code>=<em><code>&lt;factory&gt;</code></em>)</p>
</blockquote>
<p>parse response from apigateway</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Event" class="doc_header"><code>class</code> <code>Event</code><a href="https://github.com/thanakijwanavit/awsSchema/tree/master/awsSchema/apigateway.py#L69" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Event</code>(<strong><code>body</code></strong>:<code>str</code>, <strong><code>httpMethod</code></strong>:<code>Optional</code>[<code>str</code>]=<em><code>None</code></em>, <strong><code>multiValueHeaders</code></strong>:<code>Optional</code>[<code>dict</code>]=<em><code>None</code></em>, <strong><code>multiValueQueryStringParameters</code></strong>:<code>Optional</code>[<code>dict</code>]=<em><code>None</code></em>, <strong><code>path</code></strong>:<code>Optional</code>[<code>str</code>]=<em><code>None</code></em>, <strong><code>pathParameters</code></strong>:<code>Optional</code>[<code>dict</code>]=<em><code>None</code></em>, <strong><code>queryStringParameters</code></strong>:<code>Optional</code>[<code>dict</code>]=<em><code>None</code></em>, <strong><code>requestContext</code></strong>:<code>Optional</code>[<code>dict</code>]=<em><code>None</code></em>, <strong><code>headers</code></strong>:<code>dict</code>=<em><code>&lt;factory&gt;</code></em>, <strong><code>statusCode</code></strong>:<code>int</code>=<em><code>200</code></em>, <strong><code>isBase64Encoded</code></strong>:<code>bool</code>=<em><code>False</code></em>)</p>
</blockquote>
<p>parse event from apigateway</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Product" class="doc_header"><code>class</code> <code>Product</code><a href="https://github.com/thanakijwanavit/awsSchema/tree/master/awsSchema/apigateway.py#L129" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Product</code>(<strong><code>cprcode</code></strong>:<code>str</code>, <strong><code>iprcode</code></strong>:<code>str</code>, <strong><code>oprcode</code></strong>:<code>str</code>, <strong><code>ordertype</code></strong>:<code>str</code>, <strong><code>pr_abb</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Product(cprcode: str, iprcode: str, oprcode: str, ordertype: str, pr_abb: str)</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Products" class="doc_header"><code>class</code> <code>Products</code><a href="https://github.com/thanakijwanavit/awsSchema/tree/master/awsSchema/apigateway.py#L137" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Products</code>(<strong><code>products</code></strong>:<code>List</code>[<a href="/awsSchema/apigateway.html#Product"><code>Product</code></a>])</p>
</blockquote>
<p>Products(products: List[awsSchema.apigateway.Product])</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Examples">Examples<a class="anchor-link" href="#Examples"> </a></h1>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">event</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span><span class="n">body</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s1">&#39;test&#39;</span><span class="p">:</span><span class="s1">&#39;test&#39;</span><span class="p">}))</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>{&#39;body&#39;: &#39;{&#34;test&#34;:&#34;test&#34;}&#39;, &#39;httpMethod&#39;: None, &#39;multiValueHeaders&#39;: None, &#39;multiValueQueryStringParameters&#39;: None, &#39;path&#39;: None, &#39;pathParameters&#39;: None, &#39;queryStringParameters&#39;: None, &#39;requestContext&#39;: None, &#39;headers&#39;: {}, &#39;statusCode&#39;: 200, &#39;isBase64Encoded&#39;: False}
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Event</span><span class="o">.</span><span class="n">parseBody</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;test&#39;: &#39;test&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Returning-response">Returning response<a class="anchor-link" href="#Returning-response"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="success">success<a class="anchor-link" href="#success"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Response</span><span class="o">.</span><span class="n">returnSuccess</span><span class="p">(</span><span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span><span class="s1">&#39;true&#39;</span><span class="p">})</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;body&#39;: &#39;{&#34;success&#34;:&#34;true&#34;}&#39;,
 &#39;statusCode&#39;: 200,
 &#39;headers&#39;: {&#39;Access-Control-Allow-Headers&#39;: &#39;*&#39;,
  &#39;Access-Control-Allow-Origin&#39;: &#39;*&#39;,
  &#39;Access-Control-Allow-Methods&#39;: &#39;*&#39;}}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Response</span><span class="o">.</span><span class="n">returnSuccess</span><span class="p">(</span><span class="n">statusCode</span> <span class="o">=</span> <span class="mi">206</span><span class="p">,</span> <span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span><span class="s1">&#39;true&#39;</span><span class="p">})</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;body&#39;: &#39;{&#34;success&#34;:&#34;true&#34;}&#39;,
 &#39;statusCode&#39;: 206,
 &#39;headers&#39;: {&#39;Access-Control-Allow-Headers&#39;: &#39;*&#39;,
  &#39;Access-Control-Allow-Origin&#39;: &#39;*&#39;,
  &#39;Access-Control-Allow-Methods&#39;: &#39;*&#39;}}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Response</span><span class="o">.</span><span class="n">returnSuccess</span><span class="p">(</span><span class="n">body</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;body&#39;: &#39;null&#39;,
 &#39;statusCode&#39;: 200,
 &#39;headers&#39;: {&#39;Access-Control-Allow-Headers&#39;: &#39;*&#39;,
  &#39;Access-Control-Allow-Origin&#39;: &#39;*&#39;,
  &#39;Access-Control-Allow-Methods&#39;: &#39;*&#39;}}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Response</span><span class="o">.</span><span class="n">returnSuccess</span><span class="p">(</span><span class="n">body</span> <span class="o">=</span> <span class="p">{})</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;body&#39;: &#39;{}&#39;,
 &#39;statusCode&#39;: 200,
 &#39;headers&#39;: {&#39;Access-Control-Allow-Headers&#39;: &#39;*&#39;,
  &#39;Access-Control-Allow-Origin&#39;: &#39;*&#39;,
  &#39;Access-Control-Allow-Methods&#39;: &#39;*&#39;}}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Error">Error<a class="anchor-link" href="#Error"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Response</span><span class="o">.</span><span class="n">returnError</span><span class="p">(</span><span class="n">statusCode</span> <span class="o">=</span> <span class="mi">402</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;error&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;body&#39;: &#39;{&#34;error&#34;:&#34;error&#34;}&#39;,
 &#39;statusCode&#39;: 402,
 &#39;headers&#39;: {&#39;Access-Control-Allow-Headers&#39;: &#39;*&#39;,
  &#39;Access-Control-Allow-Origin&#39;: &#39;*&#39;,
  &#39;Access-Control-Allow-Methods&#39;: &#39;*&#39;}}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>responseDict = Response.returnSuccess(body = {'success':'true'})
Response.fromDict(responseDict)</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">event</span> <span class="o">=</span> <span class="n">Event</span><span class="o">.</span><span class="n">getInput</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;input&#39;</span><span class="p">:</span><span class="s1">&#39;123&#39;</span><span class="p">},</span> <span class="n">queryStringParameters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;test&#39;</span><span class="p">:</span><span class="s1">&#39;123&#39;</span><span class="p">})</span>
<span class="n">event</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;body&#39;: &#39;{&#34;input&#34;:&#34;123&#34;}&#39;,
 &#39;httpMethod&#39;: None,
 &#39;multiValueHeaders&#39;: None,
 &#39;multiValueQueryStringParameters&#39;: None,
 &#39;path&#39;: None,
 &#39;pathParameters&#39;: None,
 &#39;queryStringParameters&#39;: {&#39;test&#39;: &#39;123&#39;},
 &#39;requestContext&#39;: None,
 &#39;headers&#39;: {},
 &#39;statusCode&#39;: 200,
 &#39;isBase64Encoded&#39;: False}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Parsing-requests">Parsing requests<a class="anchor-link" href="#Parsing-requests"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;./testData/sampleEvent.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
  <span class="n">sampleEvent</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)[</span><span class="s1">&#39;input&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="get-inidividual-features">get inidividual features<a class="anchor-link" href="#get-inidividual-features"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="body">body<a class="anchor-link" href="#body"> </a></h4>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">body</span> <span class="o">=</span> <span class="n">Event</span><span class="o">.</span><span class="n">parseBody</span><span class="p">(</span><span class="n">sampleEvent</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">body</span> <span class="o">==</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">Event</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">sampleEvent</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>{&#39;a&#39;: 1}
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">headers</span> <span class="o">=</span> <span class="n">Event</span><span class="o">.</span><span class="n">parseHeaders</span><span class="p">(</span><span class="n">sampleEvent</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">headers</span> <span class="o">==</span> <span class="n">Event</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">sampleEvent</span><span class="p">)</span><span class="o">.</span><span class="n">headers</span>
<span class="nb">print</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>{&#39;Accept&#39;: &#39;*/*&#39;, &#39;Accept-Encoding&#39;: &#39;gzip, deflate&#39;, &#39;cache-control&#39;: &#39;no-cache&#39;, &#39;CloudFront-Forwarded-Proto&#39;: &#39;https&#39;, &#39;CloudFront-Is-Desktop-Viewer&#39;: &#39;true&#39;, &#39;CloudFront-Is-Mobile-Viewer&#39;: &#39;false&#39;, &#39;CloudFront-Is-SmartTV-Viewer&#39;: &#39;false&#39;, &#39;CloudFront-Is-Tablet-Viewer&#39;: &#39;false&#39;, &#39;CloudFront-Viewer-Country&#39;: &#39;US&#39;, &#39;Content-Type&#39;: &#39;application/json&#39;, &#39;headerName&#39;: &#39;headerValue&#39;, &#39;Host&#39;: &#39;gy415nuibc.execute-api.us-east-1.amazonaws.com&#39;, &#39;Postman-Token&#39;: &#39;9f583ef0-ed83-4a38-aef3-eb9ce3f7a57f&#39;, &#39;User-Agent&#39;: &#39;PostmanRuntime/2.4.5&#39;, &#39;Via&#39;: &#39;1.1 d98420743a69852491bbdea73f7680bd.cloudfront.net (CloudFront)&#39;, &#39;X-Amz-Cf-Id&#39;: &#39;pn-PWIJc6thYnZm5P0NMgOUglL1DYtl0gdeJky8tqsg8iS_sgsKD1A==&#39;, &#39;X-Forwarded-For&#39;: &#39;54.240.196.186, 54.182.214.83&#39;, &#39;X-Forwarded-Port&#39;: &#39;443&#39;, &#39;X-Forwarded-Proto&#39;: &#39;https&#39;}
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">query</span> <span class="o">=</span> <span class="n">Event</span><span class="o">.</span><span class="n">parseQuery</span><span class="p">(</span><span class="n">sampleEvent</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">query</span> <span class="o">==</span><span class="n">Event</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">sampleEvent</span><span class="p">)</span><span class="o">.</span><span class="n">queryStringParameters</span>
<span class="nb">print</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>{&#39;name&#39;: &#39;me&#39;, &#39;multivalueName&#39;: &#39;me&#39;}
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">path</span> <span class="o">=</span> <span class="n">Event</span><span class="o">.</span><span class="n">parsePath</span><span class="p">(</span><span class="n">sampleEvent</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">path</span> <span class="o">==</span> <span class="n">Event</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">sampleEvent</span><span class="p">)</span><span class="o">.</span><span class="n">path</span>
<span class="nb">print</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>/hello/world
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Parsing-data-class-directly">Parsing data class directly<a class="anchor-link" href="#Parsing-data-class-directly"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">productDict</span> <span class="o">=</span> <span class="n">Product</span><span class="p">(</span>
  <span class="n">cprcode</span><span class="o">=</span><span class="s1">&#39;123&#39;</span><span class="p">,</span>
  <span class="n">iprcode</span><span class="o">=</span><span class="s1">&#39;123&#39;</span><span class="p">,</span>
  <span class="n">oprcode</span><span class="o">=</span> <span class="s1">&#39;12343&#39;</span><span class="p">,</span>
  <span class="n">ordertype</span><span class="o">=</span><span class="s1">&#39;3225&#39;</span><span class="p">,</span>
  <span class="n">pr_abb</span><span class="o">=</span><span class="s1">&#39;4563&#39;</span>
<span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
<span class="n">event</span> <span class="o">=</span> <span class="n">Event</span><span class="o">.</span><span class="n">getInput</span><span class="p">(</span><span class="n">productDict</span><span class="p">)</span>
<span class="n">Event</span><span class="o">.</span><span class="n">parseDataClass</span><span class="p">(</span><span class="n">Product</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Product(cprcode=&#39;123&#39;, iprcode=&#39;123&#39;, oprcode=&#39;12343&#39;, ordertype=&#39;3225&#39;, pr_abb=&#39;4563&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">beartype</span> <span class="kn">import</span> <span class="n">beartype</span>
<span class="nd">@beartype</span>
<span class="k">def</span> <span class="nf">increaseVersion</span><span class="p">(</span><span class="n">string</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">str</span><span class="p">:</span>
  <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">  increase version number of the pip package by 1</span>
<span class="sd">  &#39;&#39;&#39;</span>
  <span class="n">match</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\d.\d.\d*&#39;</span><span class="p">,</span> <span class="n">string</span><span class="p">))</span>
  <span class="n">lastDigits</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
  <span class="n">newSubVersionList</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
  <span class="n">newSubVersionList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">lastDigits</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
  <span class="n">newVersionString</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">newSubVersionList</span><span class="p">)</span>
  <span class="n">wholeString</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\d.\d.\d*&#39;</span><span class="p">,</span><span class="n">newVersionString</span><span class="p">,</span><span class="n">string</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">wholeString</span>

<span class="nd">@beartype</span>
<span class="k">def</span> <span class="nf">loadFile</span><span class="p">(</span><span class="n">fileName</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span> <span class="s1">&#39;./settings.ini&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">str</span><span class="p">:</span>
  <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">file</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">file</span>
  
<span class="nd">@beartype</span>
<span class="k">def</span> <span class="nf">saveFile</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;./settings.ini.bak&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">str</span><span class="p">:</span>
  <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">data</span>
  
<span class="nd">@beartype</span>
<span class="k">def</span> <span class="nf">replaceContent</span><span class="p">(</span><span class="n">originalContent</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">str</span><span class="p">:</span>
  <span class="n">newFile</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
  <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">):</span>
    <span class="n">newFile</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="k">if</span> <span class="s1">&#39;version&#39;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
      <span class="n">newFile</span> <span class="o">+=</span> <span class="n">increaseVersion</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">newFile</span> <span class="o">+=</span> <span class="n">line</span>

<span class="k">def</span> <span class="nf">testIncreaseVersion</span><span class="p">():</span>
  <span class="n">fileName</span> <span class="o">=</span> <span class="s1">&#39;settings.ini&#39;</span>
  <span class="n">tempFileName</span> <span class="o">=</span> <span class="s1">&#39;settings.ini.bak&#39;</span>
  <span class="n">fileString</span><span class="p">:</span><span class="nb">str</span> <span class="o">=</span> <span class="n">loadFile</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;testing load file&#39;</span><span class="p">)</span>
  <span class="k">assert</span> <span class="n">fileString</span> <span class="o">==</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;testing save file&#39;</span><span class="p">)</span>
  <span class="n">saveFile</span><span class="p">(</span><span class="n">fileString</span><span class="p">,</span> <span class="n">fileName</span> <span class="o">=</span> <span class="n">tempFileName</span><span class="p">)</span>
  <span class="k">assert</span> <span class="n">fileString</span> <span class="o">==</span> <span class="nb">open</span><span class="p">(</span><span class="n">tempFileName</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;test increase version&#39;</span><span class="p">)</span>

<span class="c1"># !cat settings.ini.bak</span>
<span class="n">testIncreaseVersion</span><span class="p">()</span>
      
    
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>testing load file
testing save file
test increase version
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s1">&#39;version = 0.0.14&#39;</span>
<span class="n">increaseVersion</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;version = 0.0.15&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="APIGATEWAY-schemas">APIGATEWAY schemas<a class="anchor-link" href="#APIGATEWAY-schemas"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Requests">Requests<a class="anchor-link" href="#Requests"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">yaml</span>
<span class="n">schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;resource&quot;</span><span class="p">:</span> <span class="s2">&quot;Resource path&quot;</span><span class="p">,</span>
    <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;Path parameter&quot;</span><span class="p">,</span>
    <span class="s2">&quot;httpMethod&quot;</span><span class="p">:</span> <span class="s2">&quot;Incoming request&#39;s method name&quot;</span><span class="p">,</span>
    <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="s2">&quot;{String containing incoming request headers}&quot;</span><span class="p">,</span>
    <span class="s2">&quot;multiValueHeaders&quot;</span><span class="p">:</span> <span class="s2">&quot;{List of strings containing incoming request headers}&quot;</span><span class="p">,</span>
    <span class="s2">&quot;queryStringParameters&quot;</span><span class="p">:</span> <span class="s2">&quot;{query string parameters }&quot;</span><span class="p">,</span>
    <span class="s2">&quot;multiValueQueryStringParameters&quot;</span><span class="p">:</span> <span class="s2">&quot;{List of query string parameters}&quot;</span><span class="p">,</span>
    <span class="s2">&quot;pathParameters&quot;</span><span class="p">:</span>  <span class="s2">&quot;{path parameters}&quot;</span><span class="p">,</span>
    <span class="s2">&quot;stageVariables&quot;</span><span class="p">:</span> <span class="s2">&quot;{Applicable stage variables}&quot;</span><span class="p">,</span>
    <span class="s2">&quot;requestContext&quot;</span><span class="p">:</span> <span class="s2">&quot;{Request context, including authorizer-returned key-value pairs}&quot;</span><span class="p">,</span>
    <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;A JSON string of the request payload.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;isBase64Encoded&quot;</span><span class="p">:</span> <span class="s2">&quot;A boolean flag to indicate if the applicable request payload is Base64-encoded&quot;</span><span class="p">,</span>
<span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">schema</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>body: A JSON string of the request payload.
headers: &#39;{String containing incoming request headers}&#39;
httpMethod: Incoming request&#39;s method name
isBase64Encoded: A boolean flag to indicate if the applicable request payload is Base64-encoded
multiValueHeaders: &#39;{List of strings containing incoming request headers}&#39;
multiValueQueryStringParameters: &#39;{List of query string parameters}&#39;
path: Path parameter
pathParameters: &#39;{path parameters}&#39;
queryStringParameters: &#39;{query string parameters }&#39;
requestContext: &#39;{Request context, including authorizer-returned key-value pairs}&#39;
resource: Resource path
stageVariables: &#39;{Applicable stage variables}&#39;

</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Response">Response<a class="anchor-link" href="#Response"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;isBase64Encoded&quot;</span><span class="p">:</span> <span class="s1">&#39;bool&#39;</span><span class="p">,</span>
    <span class="s2">&quot;statusCode&quot;</span><span class="p">:</span> <span class="s1">&#39;int&#39;</span><span class="p">,</span>
    <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;headerName&quot;</span><span class="p">:</span> <span class="s2">&quot;headerValue&quot;</span> <span class="p">},</span>
    <span class="s2">&quot;multiValueHeaders&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;headerName&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;headerValue&quot;</span><span class="p">,</span> <span class="s2">&quot;headerValue2&quot;</span><span class="p">]</span>   <span class="p">},</span>
    <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">schema</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>body: &#39;...&#39;
headers:
  headerName: headerValue
isBase64Encoded: bool
multiValueHeaders:
  headerName:
  - headerValue
  - headerValue2
statusCode: int

</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 


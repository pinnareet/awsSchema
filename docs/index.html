---

title: AwsSchema


keywords: fastai
sidebar: home_sidebar

summary: "object based sdk for working with aws services for lambda function integration"
description: "object based sdk for working with aws services for lambda function integration"
nb_path: "index.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://thanakijwanavit.github.io/awsSchema/">full docs here</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Install">Install<a class="anchor-link" href="#Install"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>pip install awsSchema</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="How-to-use">How to use<a class="anchor-link" href="#How-to-use"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>extract data from aws classes eg apigateway lambda input/output
this library uses jsondataclass, and dataclass</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="API-Gateway-integration">API Gateway integration<a class="anchor-link" href="#API-Gateway-integration"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">awsSchema.apigateway</span> <span class="kn">import</span> <span class="n">Response</span><span class="p">,</span> <span class="n">Event</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="parsing-event">parsing event<a class="anchor-link" href="#parsing-event"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dummyEvent</span> <span class="o">=</span>  <span class="p">{</span> <span class="s2">&quot;resource&quot;</span><span class="p">:</span> <span class="s2">&quot;/{proxy+}&quot;</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/hello/world&quot;</span><span class="p">,</span> <span class="s2">&quot;httpMethod&quot;</span><span class="p">:</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span> <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;Accept&quot;</span><span class="p">:</span> <span class="s2">&quot;*/*&quot;</span><span class="p">,</span> <span class="s2">&quot;Accept-Encoding&quot;</span><span class="p">:</span> <span class="s2">&quot;gzip, deflate&quot;</span><span class="p">,</span> <span class="s2">&quot;cache-control&quot;</span><span class="p">:</span> <span class="s2">&quot;no-cache&quot;</span><span class="p">,</span> <span class="s2">&quot;CloudFront-Forwarded-Proto&quot;</span><span class="p">:</span> <span class="s2">&quot;https&quot;</span><span class="p">,</span> <span class="s2">&quot;CloudFront-Is-Desktop-Viewer&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;CloudFront-Is-Mobile-Viewer&quot;</span><span class="p">:</span> <span class="s2">&quot;False&quot;</span><span class="p">,</span> <span class="s2">&quot;CloudFront-Is-SmartTV-Viewer&quot;</span><span class="p">:</span> <span class="s2">&quot;False&quot;</span><span class="p">,</span> <span class="s2">&quot;CloudFront-Is-Tablet-Viewer&quot;</span><span class="p">:</span> <span class="s2">&quot;False&quot;</span><span class="p">,</span> <span class="s2">&quot;CloudFront-Viewer-Country&quot;</span><span class="p">:</span> <span class="s2">&quot;US&quot;</span><span class="p">,</span> <span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">,</span> <span class="s2">&quot;headerName&quot;</span><span class="p">:</span> <span class="s2">&quot;headerValue&quot;</span><span class="p">,</span> <span class="s2">&quot;Host&quot;</span><span class="p">:</span> <span class="s2">&quot;gy415nuibc.execute-api.us-east-1.amazonaws.com&quot;</span><span class="p">,</span> <span class="s2">&quot;Postman-Token&quot;</span><span class="p">:</span> <span class="s2">&quot;9f583ef0-ed83-4a38-aef3-eb9ce3f7a57f&quot;</span><span class="p">,</span> <span class="s2">&quot;User-Agent&quot;</span><span class="p">:</span> <span class="s2">&quot;PostmanRuntime/2.4.5&quot;</span><span class="p">,</span> <span class="s2">&quot;Via&quot;</span><span class="p">:</span> <span class="s2">&quot;1.1 d98420743a69852491bbdea73f7680bd.cloudfront.net (CloudFront)&quot;</span><span class="p">,</span> <span class="s2">&quot;X-Amz-Cf-Id&quot;</span><span class="p">:</span> <span class="s2">&quot;pn-PWIJc6thYnZm5P0NMgOUglL1DYtl0gdeJky8tqsg8iS_sgsKD1A==&quot;</span><span class="p">,</span> <span class="s2">&quot;X-Forwarded-For&quot;</span><span class="p">:</span> <span class="s2">&quot;54.240.196.186, 54.182.214.83&quot;</span><span class="p">,</span> <span class="s2">&quot;X-Forwarded-Port&quot;</span><span class="p">:</span> <span class="s2">&quot;443&quot;</span><span class="p">,</span> <span class="s2">&quot;X-Forwarded-Proto&quot;</span><span class="p">:</span> <span class="s2">&quot;https&quot;</span> <span class="p">},</span> <span class="s2">&quot;multiValueHeaders&quot;</span><span class="p">:{</span> <span class="s1">&#39;Accept&#39;</span><span class="p">:[</span> <span class="s2">&quot;*/*&quot;</span> <span class="p">],</span> <span class="s1">&#39;Accept-Encoding&#39;</span><span class="p">:[</span> <span class="s2">&quot;gzip, deflate&quot;</span> <span class="p">],</span> <span class="s1">&#39;cache-control&#39;</span><span class="p">:[</span> <span class="s2">&quot;no-cache&quot;</span> <span class="p">],</span> <span class="s1">&#39;CloudFront-Forwarded-Proto&#39;</span><span class="p">:[</span> <span class="s2">&quot;https&quot;</span> <span class="p">],</span> <span class="s1">&#39;CloudFront-Is-Desktop-Viewer&#39;</span><span class="p">:[</span> <span class="s2">&quot;true&quot;</span> <span class="p">],</span> <span class="s1">&#39;CloudFront-Is-Mobile-Viewer&#39;</span><span class="p">:[</span> <span class="s2">&quot;False&quot;</span> <span class="p">],</span> <span class="s1">&#39;CloudFront-Is-SmartTV-Viewer&#39;</span><span class="p">:[</span> <span class="s2">&quot;False&quot;</span> <span class="p">],</span> <span class="s1">&#39;CloudFront-Is-Tablet-Viewer&#39;</span><span class="p">:[</span> <span class="s2">&quot;False&quot;</span> <span class="p">],</span> <span class="s1">&#39;CloudFront-Viewer-Country&#39;</span><span class="p">:[</span> <span class="s2">&quot;US&quot;</span> <span class="p">],</span> <span class="s1">&#39;&#39;</span><span class="p">:[</span> <span class="s2">&quot;&quot;</span> <span class="p">],</span> <span class="s1">&#39;Content-Type&#39;</span><span class="p">:[</span> <span class="s2">&quot;application/json&quot;</span> <span class="p">],</span> <span class="s1">&#39;headerName&#39;</span><span class="p">:[</span> <span class="s2">&quot;headerValue&quot;</span> <span class="p">],</span> <span class="s1">&#39;Host&#39;</span><span class="p">:[</span> <span class="s2">&quot;gy415nuibc.execute-api.us-east-1.amazonaws.com&quot;</span> <span class="p">],</span> <span class="s1">&#39;Postman-Token&#39;</span><span class="p">:[</span> <span class="s2">&quot;9f583ef0-ed83-4a38-aef3-eb9ce3f7a57f&quot;</span> <span class="p">],</span> <span class="s1">&#39;User-Agent&#39;</span><span class="p">:[</span> <span class="s2">&quot;PostmanRuntime/2.4.5&quot;</span> <span class="p">],</span> <span class="s1">&#39;Via&#39;</span><span class="p">:[</span> <span class="s2">&quot;1.1 d98420743a69852491bbdea73f7680bd.cloudfront.net (CloudFront)&quot;</span> <span class="p">],</span> <span class="s1">&#39;X-Amz-Cf-Id&#39;</span><span class="p">:[</span> <span class="s2">&quot;pn-PWIJc6thYnZm5P0NMgOUglL1DYtl0gdeJky8tqsg8iS_sgsKD1A==&quot;</span> <span class="p">],</span> <span class="s1">&#39;X-Forwarded-For&#39;</span><span class="p">:[</span> <span class="s2">&quot;54.240.196.186, 54.182.214.83&quot;</span> <span class="p">],</span> <span class="s1">&#39;X-Forwarded-Port&#39;</span><span class="p">:[</span> <span class="s2">&quot;443&quot;</span> <span class="p">],</span> <span class="s1">&#39;X-Forwarded-Proto&#39;</span><span class="p">:[</span> <span class="s2">&quot;https&quot;</span> <span class="p">]</span> <span class="p">},</span> <span class="s2">&quot;queryStringParameters&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;me&quot;</span><span class="p">,</span> <span class="s2">&quot;multivalueName&quot;</span><span class="p">:</span> <span class="s2">&quot;me&quot;</span> <span class="p">},</span> <span class="s2">&quot;multiValueQueryStringParameters&quot;</span><span class="p">:{</span> <span class="s2">&quot;name&quot;</span><span class="p">:[</span> <span class="s2">&quot;me&quot;</span> <span class="p">],</span> <span class="s2">&quot;multivalueName&quot;</span><span class="p">:[</span> <span class="s2">&quot;you&quot;</span><span class="p">,</span> <span class="s2">&quot;me&quot;</span> <span class="p">]</span> <span class="p">},</span> <span class="s2">&quot;pathParameters&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;proxy&quot;</span><span class="p">:</span> <span class="s2">&quot;hello/world&quot;</span> <span class="p">},</span> <span class="s2">&quot;stageVariables&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;stageVariableName&quot;</span><span class="p">:</span> <span class="s2">&quot;stageVariableValue&quot;</span> <span class="p">},</span> <span class="s2">&quot;requestContext&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;accountId&quot;</span><span class="p">:</span> <span class="s2">&quot;12345678912&quot;</span><span class="p">,</span> <span class="s2">&quot;resourceId&quot;</span><span class="p">:</span> <span class="s2">&quot;roq9wj&quot;</span><span class="p">,</span> <span class="s2">&quot;stage&quot;</span><span class="p">:</span> <span class="s2">&quot;testStage&quot;</span><span class="p">,</span> <span class="s2">&quot;requestId&quot;</span><span class="p">:</span> <span class="s2">&quot;deef4878-7910-11e6-8f14-25afc3e9ae33&quot;</span><span class="p">,</span> <span class="s2">&quot;identity&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;cognitoIdentityPoolId&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;accountId&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;cognitoIdentityId&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;caller&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;apiKey&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;sourceIp&quot;</span><span class="p">:</span> <span class="s2">&quot;192.168.196.186&quot;</span><span class="p">,</span> <span class="s2">&quot;cognitoAuthenticationType&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;cognitoAuthenticationProvider&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;userArn&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;userAgent&quot;</span><span class="p">:</span> <span class="s2">&quot;PostmanRuntime/2.4.5&quot;</span><span class="p">,</span> <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="kc">None</span> <span class="p">},</span> <span class="s2">&quot;resourcePath&quot;</span><span class="p">:</span> <span class="s2">&quot;/{proxy+}&quot;</span><span class="p">,</span> <span class="s2">&quot;httpMethod&quot;</span><span class="p">:</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span> <span class="s2">&quot;apiId&quot;</span><span class="p">:</span> <span class="s2">&quot;gy415nuibc&quot;</span> <span class="p">},</span> <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\r\n\t\&quot;</span><span class="s2">a</span><span class="se">\&quot;</span><span class="s2">: 1</span><span class="se">\r\n</span><span class="s2">}&quot;</span><span class="p">,</span> <span class="s2">&quot;isBase64Encoded&quot;</span><span class="p">:</span> <span class="kc">False</span> <span class="p">}</span>
<span class="n">event</span> <span class="o">=</span> <span class="n">Event</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">dummyEvent</span><span class="p">)</span>
<span class="nb">type</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>awsSchema.apigateway.Event</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="parsing-for-body">parsing for body<a class="anchor-link" href="#parsing-for-body"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Event</span><span class="o">.</span><span class="n">parseBody</span><span class="p">(</span><span class="n">dummyEvent</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;a&#39;: 1}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="creating-response-for-apiGateway">creating response for apiGateway<a class="anchor-link" href="#creating-response-for-apiGateway"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">Response</span><span class="o">.</span><span class="n">returnSuccess</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;hello&#39;</span><span class="p">:</span><span class="s1">&#39;world&#39;</span><span class="p">}))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Response</span><span class="o">.</span><span class="n">returnError</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s1">&#39;error&#39;</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>{&#39;body&#39;: &#39;{&#34;hello&#34;:&#34;world&#34;}&#39;, &#39;statusCode&#39;: 200, &#39;headers&#39;: {}}
{&#39;body&#39;: &#39;{&#34;error&#34;:&#34;error&#34;}&#39;, &#39;statusCode&#39;: 400, &#39;headers&#39;: {}}
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Use-in-lambda-function">Use in lambda function<a class="anchor-link" href="#Use-in-lambda-function"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">lambda_handler</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
  <span class="c1"># parsing event body</span>
  <span class="n">body</span> <span class="o">=</span> <span class="n">Event</span><span class="o">.</span><span class="n">parseBody</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
  
  
  <span class="c1"># submitting output</span>
  <span class="k">return</span> <span class="n">Response</span><span class="o">.</span><span class="n">returnSuccess</span><span class="p">(</span><span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;success&#39;</span><span class="p">:</span><span class="s1">&#39;true&#39;</span><span class="p">})</span>

<span class="n">lambda_handler</span><span class="p">(</span><span class="n">dummyEvent</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;body&#39;: &#39;{&#34;success&#34;:&#34;true&#34;}&#39;, &#39;statusCode&#39;: 200, &#39;headers&#39;: {}}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="getting-around-lambda-proxy-integration-for-sdk">getting around lambda proxy integration for sdk<a class="anchor-link" href="#getting-around-lambda-proxy-integration-for-sdk"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">inputBody</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;test&#39;</span><span class="p">:</span><span class="s1">&#39;123&#39;</span><span class="p">}</span>

<span class="n">inputToFunction</span> <span class="o">=</span> <span class="n">Event</span><span class="o">.</span><span class="n">getInput</span><span class="p">(</span><span class="n">body</span> <span class="o">=</span> <span class="n">inputBody</span><span class="p">)</span> <span class="p">;</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;inputToFunction is </span><span class="si">{</span><span class="n">inputToFunction</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">lambda_handler</span><span class="p">(</span><span class="n">inputToFunction</span><span class="p">);</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;rawResponse is </span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">parsedResponse</span> <span class="o">=</span> <span class="n">Response</span><span class="o">.</span><span class="n">parseBody</span><span class="p">(</span><span class="n">response</span><span class="p">);</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;parsedResponse is </span><span class="si">{</span><span class="n">parsedResponse</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>inputToFunction is {&#39;body&#39;: &#39;{&#34;test&#34;:&#34;123&#34;}&#39;, &#39;headers&#39;: {}, &#39;statusCode&#39;: 200}
rawResponse is {&#39;body&#39;: &#39;{&#34;success&#34;:&#34;true&#34;}&#39;, &#39;statusCode&#39;: 200, &#39;headers&#39;: {}}
parsedResponse is {&#39;success&#39;: &#39;true&#39;}
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="S3">S3<a class="anchor-link" href="#S3"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">awsSchema.S3</span> <span class="kn">import</span> <span class="n">S3Event</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">eventSample</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;Records&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="s2">&quot;eventVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;2.1&quot;</span><span class="p">,</span> <span class="s2">&quot;eventSource&quot;</span><span class="p">:</span> <span class="s2">&quot;aws:s3&quot;</span><span class="p">,</span> <span class="s2">&quot;awsRegion&quot;</span><span class="p">:</span> <span class="s2">&quot;us-east-2&quot;</span><span class="p">,</span> <span class="s2">&quot;eventTime&quot;</span><span class="p">:</span> <span class="s2">&quot;2019-09-03T19:37:27.192Z&quot;</span><span class="p">,</span> <span class="s2">&quot;eventName&quot;</span><span class="p">:</span> <span class="s2">&quot;ObjectCreated:Put&quot;</span><span class="p">,</span> <span class="s2">&quot;userIdentity&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;principalId&quot;</span><span class="p">:</span> <span class="s2">&quot;AWS:AIDAINPONIXQXHT3IKHL2&quot;</span> <span class="p">},</span> <span class="s2">&quot;requestParameters&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;sourceIPAddress&quot;</span><span class="p">:</span> <span class="s2">&quot;205.255.255.255&quot;</span> <span class="p">},</span> <span class="s2">&quot;responseElements&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;x-amz-request-id&quot;</span><span class="p">:</span> <span class="s2">&quot;D82B88E5F771F645&quot;</span><span class="p">,</span> <span class="s2">&quot;x-amz-id-2&quot;</span><span class="p">:</span> <span class="s2">&quot;vlR7PnpV2Ce81l0PRw6jlUpck7Jo5ZsQjryTjKlc5aLWGVHPZLj5NeC6qMa0emYBDXOo6QBU0Wo=&quot;</span> <span class="p">},</span> <span class="s2">&quot;s3&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;s3SchemaVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span> <span class="s2">&quot;configurationId&quot;</span><span class="p">:</span> <span class="s2">&quot;828aa6fc-f7b5-4305-8584-487c791949c1&quot;</span><span class="p">,</span> <span class="s2">&quot;bucket&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;bucketname&quot;</span><span class="p">,</span> <span class="s2">&quot;ownerIdentity&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;principalId&quot;</span><span class="p">:</span> <span class="s2">&quot;A3I5XTEXAMAI3E&quot;</span> <span class="p">},</span> <span class="s2">&quot;arn&quot;</span><span class="p">:</span> <span class="s2">&quot;arn:aws:s3:::lambda-artifacts-eafc19498e3f2df&quot;</span> <span class="p">},</span> <span class="s2">&quot;object&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;theKey&quot;</span><span class="p">,</span> <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">1305107</span><span class="p">,</span> <span class="s2">&quot;eTag&quot;</span><span class="p">:</span> <span class="s2">&quot;b21b84d653bb07b05b1e6b33684dc11b&quot;</span><span class="p">,</span> <span class="s2">&quot;sequencer&quot;</span><span class="p">:</span> <span class="s2">&quot;0C0F6F405D6ED209E1&quot;</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span> <span class="p">]</span> <span class="p">}</span>
<span class="n">bucket</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="n">S3Event</span><span class="o">.</span><span class="n">getKeyObject</span><span class="p">(</span><span class="n">eventSample</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">bucket</span><span class="p">,</span><span class="n">key</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>bucketname theKey
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Parsing-data-class-directly">Parsing data class directly<a class="anchor-link" href="#Parsing-data-class-directly"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">field</span>
<span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span><span class="p">,</span> <span class="n">field</span>
<span class="kn">from</span> <span class="nn">dataclasses_json</span> <span class="kn">import</span> <span class="n">dataclass_json</span><span class="p">,</span> <span class="n">Undefined</span>
<span class="nd">@dataclass_json</span>
<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Product</span><span class="p">:</span>
  <span class="n">cprcode</span><span class="p">:</span> <span class="nb">str</span>
  <span class="n">iprcode</span><span class="p">:</span> <span class="nb">str</span>
  <span class="n">oprcode</span><span class="p">:</span> <span class="nb">str</span>
  <span class="n">ordertype</span><span class="p">:</span> <span class="nb">str</span>
  <span class="n">pr_abb</span><span class="p">:</span> <span class="nb">str</span>
    
<span class="n">productDict</span> <span class="o">=</span> <span class="n">Product</span><span class="p">(</span>
  <span class="n">cprcode</span><span class="o">=</span><span class="s1">&#39;123&#39;</span><span class="p">,</span>
  <span class="n">iprcode</span><span class="o">=</span><span class="s1">&#39;123&#39;</span><span class="p">,</span>
  <span class="n">oprcode</span><span class="o">=</span> <span class="s1">&#39;12343&#39;</span><span class="p">,</span>
  <span class="n">ordertype</span><span class="o">=</span><span class="s1">&#39;3225&#39;</span><span class="p">,</span>
  <span class="n">pr_abb</span><span class="o">=</span><span class="s1">&#39;4563&#39;</span>
<span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
<span class="n">productDict</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;cprcode&#39;: &#39;123&#39;,
 &#39;iprcode&#39;: &#39;123&#39;,
 &#39;oprcode&#39;: &#39;12343&#39;,
 &#39;ordertype&#39;: &#39;3225&#39;,
 &#39;pr_abb&#39;: &#39;4563&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">event</span> <span class="o">=</span> <span class="n">Event</span><span class="o">.</span><span class="n">getInput</span><span class="p">(</span><span class="n">productDict</span><span class="p">)</span>
<span class="n">Event</span><span class="o">.</span><span class="n">parseDataClass</span><span class="p">(</span><span class="n">Product</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Product(cprcode=&#39;123&#39;, iprcode=&#39;123&#39;, oprcode=&#39;12343&#39;, ordertype=&#39;3225&#39;, pr_abb=&#39;4563&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

